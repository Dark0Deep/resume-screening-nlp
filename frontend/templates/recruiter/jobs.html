{% extends "base.html" %}

{% block content %}

<style>
.container {
  max-width: 1100px;
  margin: 40px auto;
  padding: 0 20px;
}

.header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
}

.btn {
  background: linear-gradient(135deg,#6366f1,#3b82f6);
  border: none;
  padding: 12px 20px;
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: .25s;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(99,102,241,.4);
}

.job-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(300px,1fr));
  gap: 20px;
}

.job-card {
  background: #0f172a;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,.4);
  border: 1px solid #1e293b;
}

.job-card h3 {
  margin-top: 0;
  margin-bottom: 10px;
}

.job-meta {
  font-size: 13px;
  color: #94a3b8;
  margin-top: 12px;
  display: flex;
  justify-content: space-between;
}

.empty-box {
  text-align: center;
  padding: 40px;
  background: #0f172a;
  border-radius: 16px;
  border: 1px solid #1e293b;
  color: #94a3b8;
}
</style>

<div class="container">

  <div class="header-row">
    <h2>My Job Posts</h2>

    <a href="/recruiter/create-job">
      <button class="btn">âž• Create New Job</button>
    </a>
  </div>

  {% if jobs and jobs|length > 0 %}

  <div class="job-grid">

    {% for job in jobs %}
    <div class="job-card">

      <h3>{{ job.title if job.title else "Untitled Job" }}</h3>

      <p>
        {% if job.description %}
          {{ job.description[:150] }}{% if job.description|length > 150 %}...{% endif %}
        {% else %}
          No description provided.
        {% endif %}
      </p>

      <div class="job-meta">
        <span>
          ðŸ‘¥ Applicants:
          {{ job.applicant_count if job.applicant_count is defined else 0 }}
        </span>

        <span>
          ðŸ“…
          {% if job.created_at %}
            {{ job.created_at.strftime("%d %b %Y") }}
          {% else %}
            -
          {% endif %}
        </span>
      </div>

    </div>
    {% endfor %}

  </div>

  {% else %}

  <div class="empty-box">
    ðŸš€ No job posts created yet.  
    Click <strong>Create New Job</strong> to get started.
  </div>

  {% endif %}

</div>

{% endblock %}
