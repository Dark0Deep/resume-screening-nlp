{% extends "base.html" %}


{% block title %}Manage Applicants{% endblock %}
{% block heading %}Manage Applicants{% endblock %}

{% block content %}

<div class="card">
    <h2>{{ job.title }}</h2>
    <p>{{ job.description }}</p>
</div>

<div class="card" style="margin-top:30px;">
    <h3>Applicants</h3>

    {% if applications and applications|length > 0 %}

    <table>
        <tr>
            <th>Candidate</th>
            <th>Resume</th>
            <th>Match %</th>
            <th>Status</th>
            <th>Action</th>
        </tr>

        {% for app in applications %}
        <tr>
            <td>
                {{ app.candidate_name }} <br>
                <small>{{ app.candidate_email }}</small>
            </td>

            <td>{{ app.resume_filename }}</td>

            <td>{{ app.match_score }}%</td>

            <td>
                <span class="status-pill">
                    {{ app.status }}
                </span>
            </td>

            <td>
                <form method="POST" action="/recruiter/update-application-status" style="display:inline;">
                    <input type="hidden" name="application_id" value="{{ app.application_id }}">
                    <input type="hidden" name="status" value="shortlisted">
                    <button>Shortlist</button>
                </form>

                <form method="POST" action="/recruiter/update-application-status" style="display:inline;">
                    <input type="hidden" name="application_id" value="{{ app.application_id }}">
                    <input type="hidden" name="status" value="rejected">
                    <button style="background:#ef4444;">Reject</button>
                </form>
            </td>
        </tr>
        {% endfor %}

    </table>

    {% else %}

    <p>No applications yet.</p>

    {% endif %}
</div>

{% endblock %}
